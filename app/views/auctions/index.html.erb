<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>

    <div class="container">
      <h1 class="center-align">WoW Market</h1>

      <div class="row">


        <div class="input-field col s4">
          <select id="language-select">
            <option value="">Choose your language</option>
            <% @locales.each do |locale| %>
              <option value="<%= locale %>"><%= locale %></option>
            <% end %>
          </select>
          <label>Language</label>
        </div>

        <div class="input-field col s4">
          <select id="region-select">
            <option value="">Choose your region</option>
            <% @realms.each do |region| %>
              <option value="<%= region[0] %>"><%= region[0] %></option>
            <% end %>
          </select>
          <label>Region</label>
        </div>

        <div class="input-field col s4">
          <select id="realm-select">
            <option value="">Choose your realm</option>
            <!-- <% @realms["eu"].each do |realm| %> -->
            <!--   <option value="<%= realm %>"><%= realm %></option> -->
            <!-- <% end %> -->
          </select>
          <label>Realm</label>
        </div>

        
      </div>

      <div class="row">
          <button class="btn waves-effect waves-light" type="submit" name="action" onclick="button_submit()">Submit
            <i class="material-icons right">send</i>
          </button>
      </div>
    </div>

    
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
      function button_submit()
      {
      <!-- language_select = $("#language-select"); -->
      <!-- region_select = document.getElementById("region-select"); -->
      <!-- realm_select = document.getElementById("realm-select"); -->
      <!-- window.open('/' + language_select.find(':selected').text() + '/', '_self'); -->
      <!-- console.log(language_select.find(':selected').text()); -->
      window.open("/" + $("#language-select").find(":selected").text()
      + "/" + $("#region-select").find(":selected").text()
      + "/" + $("#realm-select").find(":selected").text(),
      "_self");
      }
      
      var realms = {
      <% @realms.each do |region| %>
        <%= region[0] %>: [
        <% region[1].each do |realm| %>
          "<%= realm %>",
        <% end %>
        ],
      <% end %>
      };
      
    </script>
  </body>
</html>
